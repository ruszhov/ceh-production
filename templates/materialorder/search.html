{% extends 'base.html' %}

{% block content %}

{% load widget_tweaks %}
<div class="container transform search-box">
  <form method="get">
    <div class="well">
      <h6>Фільтрування даних за заданими параметрами:</h6>
      <div class="row">
        <div class="form-group col-sm-3 col-md-2">
          <!-- {{ material_filter.form.invoice.label_tag }} -->
          {% render_field material_filter.form.invoice class="form-control" %}
        </div>
        <div class="form-group col-sm-3 col-md-2">
           <!-- {{ material_filter.form.provider__name_of_provider.label_tag }} -->
          {% render_field material_filter.form.provider__name_of_provider class="form-control" %}
        </div>
        <div class="form-group col-sm-3 col-md-2">
          <!-- {{ material_filter.form.material__name_of_material.label_tag }} -->
          {% render_field material_filter.form.material__name_of_material class="form-control" %}
        </div>
        <div class="form-group col-sm-3 col-md-2">
          <!-- {{ material_filter.form.paint__name_of_paint.label_tag }} -->
          {% render_field material_filter.form.paint__name_of_paint class="form-control" %}
        </div>
        <div class="form-group col-sm-3 col-md-2">
          <!-- {{ material_filter.form.other__name_of_other.label_tag }} -->
          {% render_field material_filter.form.other__name_of_other class="form-control" %}
        </div>
         <div class="form-group col-sm-3 col-md-2">
          <!-- {{ material_filter.form.paid.label_tag }} -->
          <span>Статус:</span>
          {% render_field material_filter.form.paid class="form-control" %}
        </div>
        <div class="form-inline col-sm-8 col-md-6">
          <!-- {{ material_filter.form.created.label_tag }} -->
          Період:&nbsp;{% render_field material_filter.form.created class="form-control" %}
        </div>
        
        <div class="btn-group" role="group" aria-label="material_filter group">
          <button type="submit" class="btn btn-primary">
          <span class="glyphicon glyphicon-search"></span><i class="fas fa-search"></i> Шукати
          </button>
          <button type="button" class="btn btn-warning clean-material_filter">
          <span class="glyphicon glyphicon-search"></span><i class="fas fa-eraser"></i> Скинути фільтри
          </button>
          <button type="button" class="btn btn-danger close-material_filter">
          <a href="{% url 'search' %}"><span class="glyphicon glyphicon-search"></span><i class="fas fa-times"></i> Закрити</a>
          </button>
        </div>
        
      </div>
      
    </div>
  </form>
</div>
  

<div class="row">
    <div class="btn-group" role="group" aria-label="Basic example">
      <button type="button" id="search-toggle" class="btn btn-success"><i class="fas fa-material_filter"></i> Фільтр</button>
      {% if perms.printOrder.change_PrintOrder %}
      <a href="{% url 'materialorder_new' %}" class="btn btn-info"><i class="fas fa-file"></i> Новий рахунок</a>
      {% endif %}
      <!-- {% if perms.printOrder.change_CampaignName %}
      <a href="{% url 'new_campaign' %}" class="btn btn-success"><i class="fas fa-file-alt"></i> Новий сюжет</a>
      {% endif %} -->
      <button type="button" onclick="tableToExcel('testTable', 'W3C Example Table')" class="btn btn-default xls"><i class="fas fa-file-excel"></i> Експортувати дані в xls</button>
      <!-- <button id="btnExport" onclick="fnExcelReport();" class="btn btn-warning"><i class="fas fa-file-excel"></i> Експортувати дані в xls</button> -->
      <!-- <button id="btnExport" class="btn btn-warning"><i class="fas fa-file-excel"></i> Експортувати дані в xls</button> -->
      <!-- <div>
        <button id="btnExport">Export to excel</button>
      </div> -->
    </div>
</div>

<section class="materialorder">
  <div class="container-fluid">
<table class="table table-responsive table-striped table-sm" id="materialorder">
  <thead class="thead-dark">
    <tr">
      {% if perms.printOrder.change_PrintOrder %}
      <th>Ред</th>
      {% endif %}
      <th>Дата</th>
      <th>№ рахунку</th>
      <th>Постачальник</th>
      <th>Матеріал</th>
      <th>Кількість</th>
      <th>Ціна, грн.</th>
      <th>Примітка</th>
      <th>Статус</th>
      <th>Додав</th>
      <th>Редагував</th>
    </tr>
  </thead>
  <tbody>
    <div id="searchable-container">
    {% for mat in material_filter.qs %}
      <tr>
        {% if perms.printOrder.change_PrintOrder %}
        <td rowspan="3" class="m1"><a href="{% url 'materialorder_edit' pk=mat.pk %}"><i class="far fa-edit"></i></a></td>
        {% endif %}
        <td rowspan="3" class="m2">{{ mat.created|date:"d.m"}}/{{ mat.created|date:"H:i" }}<br></td>
        <td rowspan="3" class="m3">{{ mat.invoice }} <br></td>
        <td rowspan="3" class="m4">{{ mat.provider.name_of_provider }}</td>
        <td class="m5">{{ mat.material.name_of_material }}</td>
        <td class="m6"><span class="m_kv_of_material">{{ mat.m_kv_of_material }}&nbsp;м<sup>2</sup></span></td>
        <td class="m7"><span class="total_of_material">{{ mat.total_of_material }}&nbsp;грн.</span></td>
        <td rowspan="3" class="m8">{{ mat.description }}</td>
        <td rowspan="3" class="m9"><a href="{% url 'paid_status' pk=mat.pk %}"><i class="far fa-edit"></i></a>&nbsp;{{ mat.paid }}</td>
        <td rowspan="3" class="m10">{{ mat.created_by }}</td>
        <td rowspan="3" class="m11">{{ mat.updated_by }}</td>
    </tr>
    <tr>
        <td class="m5">{{ mat.paint.name_of_paint }}</td>
        <td class="m6"><span class="all_litres">{{ mat.all_litres }}&nbsp;л.</span></td>
        <td class="m7"><span class="total_of_paint">{{ mat.total_of_paint }}&nbsp;грн.</span></td>
    </tr>
    <tr>
        <td class="m5">{{ mat.other.name_of_other }}</td>
        <td class="m6"><span class="all_of_other">{{ mat.all_of_other }}&nbsp;шт.</span></td>
        <td class="m7"><span class="total_of_other">{{ mat.total_of_other }}&nbsp;грн.</span></td>
    {% endfor %}
  </tbody>
</div>

</table>
</div>
</section>

<script>
  $('#id_created_0').datepicker({
      uiLibrary: 'bootstrap4',
      locale: 'ua-ua',
      format: 'yyyy-mm-dd'
  });
  $('#id_created_1').datepicker({
      uiLibrary: 'bootstrap4',
      locale: 'ua-ua',
      format: 'yyyy-mm-dd'
  });
</script>


{% endblock %}